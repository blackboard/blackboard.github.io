<!DOCTYPE html>
<html>
<head>
    <script src="/assets/js/search-script.js" type="text/javascript"></script>
     <!-- Global site tag (gtag.js) - Google Analytics -->
     <script async src="https://www.googletagmanager.com/gtag/js?id=UA-173992978-1"></script>
     <script>
       window.dataLayer = window.dataLayer || [];
       function gtag(){dataLayer.push(arguments);}
       gtag('js', new Date());
 
       gtag('config', 'UA-173992978-1');
     </script>
    <title>Use One-Time Session Token to Authenticate with UEF</title>

    <!-- Search --> 

    
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.js"></script>
    

    <meta name="description" content="">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,600;0,700;0,800;1,300;1,400;1,600;1,700;1,800&family=Source+Sans+Pro:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700;1,900&display=swap"
          rel="stylesheet">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"/>
    <link rel="shortcut icon" href="/assets/img/favicon-96x96.png">
    <!-- CSS and fonts -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto+Condensed" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link href="/assets/css/main.css" type="text/css" rel="stylesheet" media="screen,projection"/>
    <!-- JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script type="text/javascript"  src="/assets/js/accordion-menu.js"></script>
    <script type="text/javascript"  src="/assets/js/toc.min.js"></script>
    <script>
        var pageId = "/blog/2021/05/10/use one time session tokens instead of cookies for UEF authentication";
        pageId = "#" + pageId
        $(document).ready(function () {
            

            $( "#menu-trigger" ).click(function() {
                $( ".menu" ).toggle(); 
                $( ".menu" ).css( "position", "absolute" ); 
            });
             
            new AccordionMenu('.col-menu');
            $( document ).find( "h2" ).css( "border-left-color", "#A234B5" );

            
            $( "h2,h3" ).addClass( "section scrollspy" );
            $('.scrollspy').scrollSpy();
            

            $('.sidenav').sidenav();
            $('.collapsible').collapsible();
            $('.collapsible').collapsible('open', pageId);

            if( $( "li" ).find( pageId ) ){
                $(pageId).addClass("open");
                $("li" + pageId ).css("display","block");
                $( "li" + pageId ).parentsUntil(".col-menu").css( "height","auto" );
                $(pageId).parentsUntil(".col-menu").addClass("open");
                $( pageId ).find( "a" ).css( "border-left-color", "#A234B5" );
                $( pageId ).find( "a" ).css( "maincontentborder-left-style", "solid" );
                $( pageId ).find( "a" ).css( "border-left-width", "6px" );
            }
             // This is the index search, I am avoiding to load the whole search.json everywhere
            if(pageId == "#index"){
                SimpleJekyllSearch({
                    searchInput: document.getElementById("search-input"),
                    resultsContainer: document.getElementById("results-container"),
                    json: "/search.json",
                    searchResultTemplate: '<li><a href="{url}" desc="{desc}" target="{target}">{title}</a></li>'
                });
            }

        });


    </script>

    <!--
        Ally Website Integration Script.
        "data-ally-af-style" can be one of the following values to customize the look and feel:
            - flag_small
            - flag_large
            - bar_bottom
    -->
    <script
    data-ally-loader
    data-ally-platform-name="web"
    data-ally-client-id="4826"
    data-ally-af-style="flag_small"
    src="https://prod.ally.ac/integration/api/ally.ui.js">
    </script>
    <!-- This is the index search script -->
</head>
<body>

    <header>
      <a href="/">  <img id="bblogoheader" src="/assets/img/bb_logo.png" alt="Blackboard Logo">
        <span id="dev-docs-span-text">Dev Docs</span> </a>
        <div class="header-buttons">
            <a href="/search"><i class="material-icons">search</i></a>
            <a href="/feed.xml"><i class="material-icons">rss_feed</i></a>
            <a href="#" id="menu-trigger"><i class="material-icons">menu</i></a>
        </div>
    </header>

<div class="menu">
    <div class="accordion-menu col-menu">
        <ul>
            <li class="first-level" id="home" ><a href="/"><i class="material-icons">home</i>Home</a>
            
                <li class="first-level" id="learn-group" ><a href="#"><i class="material-icons">school</i>Learn</a>
                    <ul>
                    
                        
                            <li class="second-level" id="learn-rest" ><a href="">REST</a>
                                <ul>
                                
                                    <li class="third-level" id="rest-getting-started"><a href="">Getting Started</a>
                                        <ul>
                                            
                                            <li class="content" id="learn-rest-gs-first-steps"><a href="/learn/rest/getting-started/first-steps" target="_self" >First Steps with Learn REST API</a></li>
                                            
                                            <li class="content" id="learn-rest-gs-basic-auth"><a href="/learn/rest/getting-started/basic-authentication" target="_self" >Basic Authentication</a></li>
                                            
                                            <li class="content" id="learn-rest-gs-registry"><a href="/learn/rest/getting-started/registry" target="_self" >Registry</a></li>
                                            
                                            <li class="content" id="learn-rest-gs-releasing-integration"><a href="/learn/rest/getting-started/releasing-your-integration" target="_self" >Releasing your Integration</a></li>
                                            
                                            <li class="content" id="learn-rest-gs-3lo"><a href="/learn/rest/getting-started/3lo" target="_self" >Three-Legged OAuth</a></li>
                                            
                                            <li class="content" id="learn-rest-gs-api"><a href="/learn/rest/getting-started/api" target="_self" >Learn API</a></li>
                                            
                                            <li class="content" id="learn-rest-dev-portal"><a href="/learn/rest/getting-started/developer-portal" target="_self" >Developer Portal</a></li>
                                            
                                            <li class="content" id="learn-rest-gs-framework"><a href="/learn/rest/getting-started/framework" target="_self" >Framework</a></li>
                                            
                                            <li class="content" id="learn-rest-gs-tutorials"><a href="/learn/rest/getting-started/tutorials" target="_self" >Tutorials</a></li>
                                            
                                            <li class="content" id="DBVA-dev-ami"><a href="/dvba/developer-ami" target="_self" >Development Test Site</a></li>
                                            
                                            <li class="content" id="learn-rest-admin-group-quotas-rates"><a href="/learn/rest/admin/groups-quotas-rates" target="_self" >Group, Quotas, Rates</a></li>
                                            
                                            <li class="content" id="learn-rest-admin-prod-groups"><a href="/learn/rest/admin/production-groups" target="_self" >Production Groups</a></li>
                                            
                                        </ul>
                                    </li>
                                
                                    <li class="third-level" id="rest-admin"><a href="">Admin</a>
                                        <ul>
                                            
                                            <li class="content" id="learn-rest-admin-cloud-registry"><a href="/learn/rest/admin/cloud-registry" target="_self" >Cloud Registry</a></li>
                                            
                                            <li class="content" id="learn-rest-gs-rest-and-learn"><a href="/learn/rest/getting-started/rest-and-learn" target="_self" >Rest and Learn</a></li>
                                            
                                        </ul>
                                    </li>
                                
                                    <li class="third-level" id="rest-examples"><a href="">Examples</a>
                                        <ul>
                                            
                                            <li class="content" id="learn-rest-examples-csharpdemo"><a href="/learn/rest/examples/csharp-demo" target="_self" >C# Demo</a></li>
                                            
                                            <li class="content" id="learn-rest-examples-curl-attach-demo"><a href="/learn/rest/examples/curl-attachments-demo" target="_self" >cURL attachments demo</a></li>
                                            
                                            <li class="content" id="learn-rest-examples-curl-demo"><a href="/learn/rest/examples/curl-demo" target="_self" >cURL demo</a></li>
                                            
                                            <li class="content" id="learn-rest-examples-golang-demo"><a href="/learn/rest/examples/golang-demo" target="_self" >GoLang demo</a></li>
                                            
                                            <li class="content" id="learn-rest-examples-java-command-line"><a href="/learn/rest/examples/java-command-line" target="_self" >Java Command Line</a></li>
                                            
                                            <li class="content" id="learn-rest-examples-java-demo"><a href="/learn/rest/examples/java-demo" target="_self" >Java Demo</a></li>
                                            
                                            <li class="content" id="learn-rest-examples-php-demo"><a href="/learn/rest/examples/php-demo" target="_self" >PHP Demo</a></li>
                                            
                                            <li class="content" id="learn-rest-examples-python-demo"><a href="/learn/rest/examples/python-demo" target="_self" >Python Demo</a></li>
                                            
                                            <li class="content" id="learn-rest-examples-ruby-demo"><a href="/learn/rest/examples/ruby-demo" target="_self" >Ruby Demo</a></li>
                                            
                                            <li class="content" id="learn-rest-examples-angular-demo"><a href="https://github.com/blackboard/BBDN-REST-Angular-WithProxy" target="_blank" >Angular Demo (GitHub)</a></li>
                                            
                                            <li class="content" id="learn-rest-examples-nodejs-demo"><a href="https://github.com/blackboard/BBDN-LTI-Tool-Provider-Node" target="_blank" >NodeJS Demo (GitHub)</a></li>
                                            
                                        </ul>
                                    </li>
                                
                                    <li class="third-level" id="rest-advanced"><a href="">Advanced</a>
                                        <ul>
                                            
                                            <li class="content" id="learn-soap-gs-soap-to-rest"><a href="/learn/soap/getting-started/soap-to-rest-mapping" target="_self" >SOAP to REST Mapping</a></li>
                                            
                                            <li class="content" id="learn-rest-advanced-bbml"><a href="/learn/rest/advanced/bbml" target="_self" >BBML</a></li>
                                            
                                            <li class="content" id="learn-rest-advanced-content-hndlr"><a href="/learn/rest/advanced/contenthandler-datatypes" target="_self" >Content Handler Datatypes</a></li>
                                            
                                            <li class="content" id="learn-rest-advanced-merge-crosslist-courses"><a href="/learn/rest/advanced/merge-and-crosslist-courses" target="_self" >Merge and Crosslist Courses</a></li>
                                            
                                            <li class="content" id="learn-rest-advanced-ultra-assignments"><a href="/learn/rest/advanced/ultra-assignments" target="_self" >Ultra Assignments</a></li>
                                            
                                            <li class="content" id="learn-rest-advanced-dynamic_rendering"><a href="/learn/rest/advanced/dynamic-rendering-with-template-variables" target="_self" >Dynamic Rendering</a></li>
                                            
                                        </ul>
                                    </li>
                                
                                </ul>
                            </li>
                        
                            <li class="second-level" id="learn-uef" ><a href="">UEF</a>
                                <ul>
                                
                                    <li class="third-level" id="learn-uef-getting-started"><a href="">Getting Started</a>
                                        <ul>
                                            
                                            <li class="content" id="learn-uef-gs-first-steps"><a href="/learn/uef/getting-started" target="_self" >First Steps with UEF</a></li>
                                            
                                            <li class="content" id="learn-uef-gs-security-and-tokens"><a href="/learn/uef/security-and-tokens" target="_self" >Security and Tokens on UEF</a></li>
                                            
                                            <li class="content" id="learn-uef-gs-documentation"><a href="/learn/uef/documentation" target="_self" >UEF Documentation</a></li>
                                            
                                            <li class="content" id="learn-uef-gs-tutorials"><a href="/learn/uef/tutorials" target="_self" >UEF Tutorials</a></li>
                                            
                                            <li class="content" id="learn-uef-gs-configure"><a href="/learn/uef/configure-uef" target="_self" >Configuring Learn and UEF</a></li>
                                            
                                        </ul>
                                    </li>
                                
                                </ul>
                            </li>
                        
                            <li class="second-level" id="learn-b2" ><a href="">B2 (New Dev Use REST/LTI)</a>
                                <ul>
                                
                                    <li class="third-level" id="b2-getting-started"><a href="">Getting Started</a>
                                        <ul>
                                            
                                            <li class="content" id="learn-b2-gs-intro"><a href="/learn/b2/getting-started/intro" target="_self" >Introduction to B2S</a></li>
                                            
                                            <li class="content" id="learn-b2-gs-first-steps"><a href="/learn/b2/getting-started/first-steps" target="_self" >First Steps with Building blocks</a></li>
                                            
                                            <li class="content" id="learn-b2-gs-dev-live-cycle"><a href="/learn/b2/getting-started/dev-life-cycle" target="_self" >Development life cycle in B2s</a></li>
                                            
                                            <li class="content" id="learn-b2-gs-api-over"><a href="/learn/b2/getting-started/api-overview" target="_self" >API Overview for B2s</a></li>
                                            
                                            <li class="content" id="learn-b2-gs-api-doc"><a href="/learn/b2/getting-started/api-documentation" target="_self" >API Documentation on B2s</a></li>
                                            
                                            <li class="content" id="learn-b2-gs-starter-b2"><a href="/learn/b2/getting-started/starter-b2" target="_self" >Starter B2</a></li>
                                            
                                            <li class="content" id="learn-b2-gs-faqs"><a href="/learn/b2/getting-started/faq" target="_self" >FAQs on B2s</a></li>
                                            
                                            <li class="content" id="learn-b2-gs-rosetta-stone"><a href="/learn/b2/getting-started/rosetta-stone" target="_self" >Versioning Rosetta Stone for B2s</a></li>
                                            
                                        </ul>
                                    </li>
                                
                                    <li class="third-level" id="b2-advanced"><a href="">Advanced</a>
                                        <ul>
                                            
                                            <li class="content" id="learn-b2-advced-event-driven-api"><a href="/learn/b2/advanced/event-driven-api" target="_self" >Event driven API</a></li>
                                            
                                            <li class="content" id="learn-b2-advced-java-permissions"><a href="/learn/b2/advanced/java-permissions" target="_self" >Java Permissions</a></li>
                                            
                                        </ul>
                                    </li>
                                
                                    <li class="third-level" id="b2-resources"><a href="">Resources</a>
                                        <ul>
                                            
                                            <li class="content" id="learn-b2-resources-first-project-gradle"><a href="/learn/b2/resources/first-project-using-gradle-and-git" target="_self" >First project using gradle and Git</a></li>
                                            
                                            <li class="content" id="learn-b2-resources-java-11"><a href="/learn/b2/resources/java11-faq" target="_self" >Java 11 FAQs</a></li>
                                            
                                            <li class="content" id="learn-b2-resources-prepare-java-11"><a href="/learn/b2/resources/prepare-for-java11" target="_self" >Prepare for Java 11</a></li>
                                            
                                            <li class="content" id="learn-b2-resources-prep-learn-q2"><a href="/learn/b2/resources/preparing-for-learn-q2-2016" target="_self" >Preparing for Q2-2016</a></li>
                                            
                                            <li class="content" id="learn-b2-resources-moving-to-saas"><a href="/learn/b2/resources/preparing-for-saas-and-new-learn-versions" target="_self" >Moving to SaaS and new Learn versions</a></li>
                                            
                                            <li class="content" id="learn-b2-resources-enable-rem-debug"><a href="/learn/b2/resources/enabling-remote-debugging" target="_self" >Enabling remote debugging</a></li>
                                            
                                            <li class="content" id="learn-b2-resources-useful-links"><a href="/learn/b2/resources/useful-links" target="_self" >Useful Links</a></li>
                                            
                                            <li class="content" id="learn-b2-resources-scan-tool"><a href="/learn/b2/resources/scan-tool-learn-saas" target="_self" >Scan tool for Learn SaaS</a></li>
                                            
                                        </ul>
                                    </li>
                                
                                    <li class="third-level" id="b2-best-practices"><a href="">Best Practices</a>
                                        <ul>
                                            
                                            <li class="content" id="learn-b2-bp-code-quality"><a href="/learn/b2/best-practices/code-quality" target="_self" >Code Quality</a></li>
                                            
                                            <li class="content" id="learn-b2-bp-dev-using-maven"><a href="/learn/b2/best-practices/develop-using-maven-repository" target="_self" >Developing using maven</a></li>
                                            
                                            <li class="content" id="learn-b2-bp-secure-coding-practices"><a href="/learn/b2/best-practices/secure-coding-practices" target="_self" >Secure Coding Practices</a></li>
                                            
                                            <li class="content" id="learn-b2-bp-security"><a href="/learn/b2/best-practices/security" target="_self" >Security</a></li>
                                            
                                        </ul>
                                    </li>
                                
                                    <li class="third-level" id="b2-opendb"><a href="">OpenDB</a>
                                        <ul>
                                            
                                            <li class="content" id="learn-b2-opendb-creatingdb-object"><a href="/learn/b2/opendb/creating-database-objects" target="_self" >Creating database objects</a></li>
                                            
                                            <li class="content" id="learn-b2-opendb-intro-to-opendb"><a href="/learn/b2/opendb/intro-to-opendb" target="_self" >Intro to OpenDB</a></li>
                                            
                                            <li class="content" id="learn-b2-opendb-schema-def"><a href="/learn/b2/opendb/schema-definitions" target="_self" >Schema Definitions</a></li>
                                            
                                            <li class="content" id="learn-b2-opendb-schema-xml"><a href="/learn/b2/opendb/schema-xml" target="_self" >Schema XML</a></li>
                                            
                                        </ul>
                                    </li>
                                
                                    <li class="third-level" id="b2-examples"><a href="">Examples</a>
                                        <ul>
                                            
                                            <li class="content" id="learn-b2-examples-course-user-enrollment"><a href="/learn/b2/examples/course-user-and-enrollment-data" target="_self" >Course user and Enrollment data</a></li>
                                            
                                            <li class="content" id="learn-b2-examples-schema-xml"><a href="https://github.com/blackboard/BBDN-schema-sample" target="_blank" >Schema.XML (GitHub)</a></li>
                                            
                                            <li class="content" id="learn-b2-examples-spring-in-b2s"><a href="/learn/b2/examples/spring-in-b2s" target="_self" >Spring in B2s</a></li>
                                            
                                        </ul>
                                    </li>
                                
                                </ul>
                            </li>
                        
                            <li class="second-level" id="learn-soap" ><a href="">SOAP</a>
                                <ul>
                                
                                    <li class="third-level" id="soap-getting-started"><a href="">Getting Started</a>
                                        <ul>
                                            
                                            <li class="content" id="learn-soap-gs-first-steps"><a href="/learn/soap/getting-started/first-steps" target="_self" >First Steps with SOAP</a></li>
                                            
                                            <li class="content" id="learn-soap-gs-intro"><a href="/learn/soap/getting-started/introduction" target="_self" >Introduction to SOAP</a></li>
                                            
                                            <li class="content" id="learn-soap-gs-proxy-tools"><a href="/learn/soap/getting-started/proxy-tools" target="_self" >Proxy Tools in SOAP</a></li>
                                            
                                            <li class="content" id="learn-soap-gs-soap-to-rest"><a href="/learn/soap/getting-started/soap-to-rest-mapping" target="_self" >SOAP to REST Mapping</a></li>
                                            
                                            <li class="content" id="learn-soap-gs-web-services"><a href="/learn/soap/getting-started/web-services" target="_self" >Web Services and SOAP</a></li>
                                            
                                            <li class="content" id="learn-soap-gs-about-web-services-sc"><a href="/learn/soap/getting-started/about-web-services-sample-code" target="_self" >About Web Services Sample Code (SOAP)</a></li>
                                            
                                        </ul>
                                    </li>
                                
                                    <li class="third-level" id="soap-tutorials"><a href="">Tutorials</a>
                                        <ul>
                                            
                                            <li class="content" id="learn-soap-tutorials-build-a-sample-client-c"><a href="/learn/soap/tutorials/build-sample-client-csharp" target="_self" >Build a Sample client using C# (SOAP)</a></li>
                                            
                                            <li class="content" id="learn-soap-tutorials-build-a-sample-library-c"><a href="/learn/soap/tutorials/build-sample-library-csharp" target="_self" >Build a Sample library using C# (SOAP)</a></li>
                                            
                                            <li class="content" id="learn-soap-tutorials-build-a-java-client"><a href="/learn/soap/tutorials/java-client-library" target="_self" >Build a Java Client library (SOAP)</a></li>
                                            
                                        </ul>
                                    </li>
                                
                                    <li class="third-level" id="soap-examples"><a href="">Examples</a>
                                        <ul>
                                            
                                            <li class="content" id="learn-soap-examples-course-announcements-py"><a href="/learn/soap/examples/course-announcements-using-python" target="_self" >Course announcements using Python (SOAP)</a></li>
                                            
                                            <li class="content" id="learn-soap-examples-course-membership-and-role-c"><a href="/learn/soap/examples/course-membership-and-role-csharp" target="_self" >Course Membership and role using C# (SOAP)</a></li>
                                            
                                        </ul>
                                    </li>
                                
                                </ul>
                            </li>
                        
                    
                    </ul>
            
                <li class="first-level" id="collab-group" ><a href="#"><i class="material-icons">mic</i>Collaborate</a>
                    <ul>
                    
                            
                            <li class="content" id="collab-api-first-steps" ><a href="/collaborate/first-steps">First Steps with Collaborate</a></li>
                            
                            <li class="content" id="collab-getting-started" ><a href="/collaborate/getting-started">Getting Started with collaborate</a></li>
                            
                            <li class="content" id="collab-security-and-tokens" ><a href="/collaborate/security-and-tokens">Security and Tokens in Collaborate</a></li>
                            
                            <li class="content" id="collab-api-objects" ><a href="/collaborate/api-objects">API Objects in Collaborate</a></li>
                            
                            <li class="content" id="collab-api" ><a href="/collaborate/api">Collaborate API</a></li>
                            
                            <li class="content" id="collab-session-definitions" ><a href="/collaborate/session-definitions">Session Definitions in Collaborate</a></li>
                            
                    
                    </ul>
            
                <li class="first-level" id="dbva-group" ><a href="#"><i class="material-icons">web_asset</i>DBVA</a>
                    <ul>
                    
                            
                            <li class="content" id="DBVA-dev-ami" ><a href="/dvba/developer-ami">Developer AMI</a></li>
                            
                            <li class="content" id="DBVA-dvm" ><a href="/dvba/dvm">DVM</a></li>
                            
                            <li class="content" id="DBVA-faqs" ><a href="/dvba/faq">FAQs on DVBA</a></li>
                            
                            <li class="content" id="DBVA-what-is-dvba" ><a href="/dvba/what-is-dvba">What is DVBA</a></li>
                            
                    
                    </ul>
            
                <li class="first-level" id="ally-group" ><a href="#"><i class="material-icons">picture_as_pdf</i>Ally</a>
                    <ul>
                    
                            
                            <li class="content" id="ally-about-api-doc" ><a href="/ally/about-api-documentation">About the Ally API Documentation</a></li>
                            
                            <li class="content" id="ally-getting-started" ><a href="/ally/getting-started">Getting Started with Ally</a></li>
                            
                            <li class="content" id="ally-api" ><a href="/ally/api">Ally API</a></li>
                            
                            <li class="content" id="ally-authorization" ><a href="/ally/auth">Authorization in Ally</a></li>
                            
                            <li class="content" id="ally-uploading-files" ><a href="/ally/uploading-files">Uploading Files in Ally</a></li>
                            
                            <li class="content" id="ally-check-status" ><a href="/ally/check-status">Check Status in Ally</a></li>
                            
                            <li class="content" id="ally-getting-feedback" ><a href="/ally/get-feedback">Getting Feedback in Ally</a></li>
                            
                            <li class="content" id="ally-getting-batched-feedback" ><a href="/ally/get-batched-feedback">Getting Batched Feedback in Ally</a></li>
                            
                            <li class="content" id="ally-api-feedback-def" ><a href="/ally/feedback-definitions">Feedback Definitions in Ally</a></li>
                            
                            <li class="content" id="ally-ui-integration" ><a href="/ally/ui-integration">UI Integration in Ally</a></li>
                            
                    
                    </ul>
            
                <li class="first-level" id="community-group" ><a href="#"><i class="material-icons">assignment_ind</i>Community</a>
                    <ul>
                    
                            
                            <li class="content" id="community-getting-involved" ><a href="/community/getting-involved">Getting involved</a></li>
                            
                            <li class="content" id="community-contact-us" ><a href="/community/contact">Contact us</a></li>
                            
                    
                    </ul>
            
                <li class="first-level" id="mobile-group" ><a href="#"><i class="material-icons">phone_iphone</i>Mobile</a>
                    <ul>
                    
                            
                            <li class="content" id="mobile-bbapp-students-launch" ><a href="/mobile/bbapp-students-launch-schema">Bbapp Students launch Schema</a></li>
                            
                    
                    </ul>
            
                <li class="first-level" id="standards-group" ><a href="#"><i class="material-icons">lightbulb_outline</i>Standards</a>
                    <ul>
                    
                        
                            <li class="second-level" id="standards-caliper" ><a href="">Caliper</a>
                                <ul>
                                
                                    <li class="third-level" id="standards-caliper-getting-started"><a href="">Getting Started</a>
                                        <ul>
                                            
                                            <li class="content" id="standards-caliper-gs-getting-started"><a href="/standards/caliper/getting-started/getting-started-with-caliper" target="_self" >Getting Started with Caliper</a></li>
                                            
                                            <li class="content" id="standards-caliper-gs-caliper-events"><a href="/standards/caliper/getting-started/caliper-event-store-for-learn" target="_self" >Caliper Event Store in Learn</a></li>
                                            
                                            <li class="content" id="standards-caliper-gs-metric-profiles"><a href="/standards/caliper/getting-started/metric-profiles" target="_self" >Metric Profiles</a></li>
                                            
                                        </ul>
                                    </li>
                                
                                    <li class="third-level" id="standards-caliper-events"><a href="">Events</a>
                                        <ul>
                                            
                                            <li class="content" id="standards-caliper-events-guide"><a href="/standards/caliper/events/event-guide" target="_self" >Event Guide</a></li>
                                            
                                            <li class="content" id="standards-caliper-events-assesments"><a href="/standards/caliper/events/assessment-events" target="_self" >Assessment Events</a></li>
                                            
                                            <li class="content" id="standards-caliper-events-assignables"><a href="/standards/caliper/events/assignable-events" target="_self" >Assignable Events</a></li>
                                            
                                            <li class="content" id="standards-caliper-events-blogs"><a href="/standards/caliper/events/blog-events" target="_self" >Blog Events</a></li>
                                            
                                            <li class="content" id="standards-caliper-events-calculated-grade-snapshots"><a href="/standards/caliper/events/calculated-grade-snapshot-events" target="_self" >Calculated grade snapshot events</a></li>
                                            
                                            <li class="content" id="standards-caliper-events-course-group"><a href="/standards/caliper/events/course-group-events" target="_self" >Course Group Events</a></li>
                                            
                                            <li class="content" id="standards-caliper-events-content"><a href="/standards/caliper/events/content-events" target="_self" >Content Events</a></li>
                                            
                                            <li class="content" id="standards-caliper-events-forum"><a href="/standards/caliper/events/forum-events" target="_self" >Forum Events</a></li>
                                            
                                            <li class="content" id="standards-caliper-events-grade-events"><a href="/standards/caliper/events/grade-events" target="_self" >Grade Events</a></li>
                                            
                                            <li class="content" id="standards-caliper-events-lti-events"><a href="/standards/caliper/events/lti-events" target="_self" >LTI Events</a></li>
                                            
                                            <li class="content" id="standards-caliper-events-sessions"><a href="/standards/caliper/events/session-events" target="_self" >Session Events</a></li>
                                            
                                            <li class="content" id="standards-caliper-events-views"><a href="/standards/caliper/events/view-events" target="_self" >View Events</a></li>
                                            
                                            <li class="content" id="standards-caliper-events-wikis"><a href="/standards/caliper/events/wiki-events" target="_self" >Wiki Events</a></li>
                                            
                                        </ul>
                                    </li>
                                
                                </ul>
                            </li>
                        
                            <li class="second-level" id="standards-lti" ><a href="">LTI</a>
                                <ul>
                                
                                    <li class="third-level" id="standards-lti-getting-started"><a href="">Getting Started</a>
                                        <ul>
                                            
                                            <li class="content" id="standards-lti-gs-with-lti"><a href="/standards/lti/getting-started/getting-started-with-lti" target="_self" >Getting Started with LTI</a></li>
                                            
                                        </ul>
                                    </li>
                                
                                    <li class="third-level" id="standards-lti-core-launch"><a href="">LTI 1.3 Core Launch</a>
                                        <ul>
                                            
                                            <li class="content" id="standards-lti-core-oidc-login"><a href="/standards/lti/core/oidc-login" target="_self" >Handling OIDC Login</a></li>
                                            
                                            <li class="content" id="standards-lti-core-id-token"><a href="/standards/lti/core/id-token" target="_self" >Processing the id_token JWT</a></li>
                                            
                                        </ul>
                                    </li>
                                
                                    <li class="third-level" id="standards-lti-deep-linking"><a href="">LTI Deep Linking 2.0</a>
                                        <ul>
                                            
                                            <li class="content" id="standards-lti-deep-link-json"><a href="/standards/lti/deep-linking/deep-linking-json" target="_self" >Deep Linking Sample Json</a></li>
                                            
                                        </ul>
                                    </li>
                                
                                    <li class="third-level" id="standards-lti-migrating"><a href="">Migrating</a>
                                        <ul>
                                            
                                            <li class="content" id="standards-lti-migrating-11"><a href="/standards/lti/migrating/migrating-11" target="_self" >Migrating  from LTI 1.1 to 1.3</a></li>
                                            
                                        </ul>
                                    </li>
                                
                                    <li class="third-level" id="standards-lti-test-tool"><a href="">Testing Tool</a>
                                        <ul>
                                            
                                            <li class="content" id="standards-lti-testtool-four-part-video"><a href="/standards/lti/test-tool/four-part-video-tutorial" target="_self" >Four part Video Tutorial</a></li>
                                            
                                        </ul>
                                    </li>
                                
                                    <li class="third-level" id="standards-lti-tutorials"><a href="">Tutorials</a>
                                        <ul>
                                            
                                            <li class="content" id="standards-lti-tutorials-develop-lti-adtge"><a href="/standards/lti/tutorials/develop-lti-advantage-solution" target="_self" >Develop LTI Advantage Solution</a></li>
                                            
                                            <li class="content" id="standards-lti-tutorials-names-and-roles"><a href="/standards/lti/tutorials/names-and-roles" target="_self" >Names and Roles</a></li>
                                            
                                            <li class="content" id="standards-lti-tutorials-pylti1p3"><a href="/standards/lti/tutorials/py-lti-1p3" target="_self" >PyLti1p3 Library</a></li>
                                            
                                        </ul>
                                    </li>
                                
                                    <li class="third-level" id="standards-lti-trouble"><a href="">Troubleshooting</a>
                                        <ul>
                                            
                                            <li class="content" id="standards-lti-trouble-turn-on-all"><a href="/standards/lti/troubleshooting/turn-on-all-switches" target="_self" >Troubleshooting</a></li>
                                            
                                        </ul>
                                    </li>
                                
                                    <li class="third-level" id="standards-lti-proctoring"><a href="">Ultra Proctoring Service Integration</a>
                                        <ul>
                                            
                                            <li class="content" id="standards-lti-proctoring-service"><a href="/standards/lti/ultra-proctoring-service-integration" target="_self" >Ultra Proctoring Service Integration</a></li>
                                            
                                        </ul>
                                    </li>
                                
                                </ul>
                            </li>
                        
                    
                    </ul>
            
                <li class="first-level" id="partners-group" ><a href="#"><i class="material-icons">thumb_up</i>Partners</a>
                    <ul>
                    
                            
                            <li class="content" id="partners-become-a-partner" ><a href="/partners/become-a-partner">Become a Partner</a></li>
                            
                            <li class="content" id="partners-blackboard-app-catalog-faq" ><a href="/partners/blackboard-app-catalog-faq">Blackboard App catalog FAQ</a></li>
                            
                    
                    </ul>
            
                <li class="first-level" id="blogs-group" ><a href="#"><i class="material-icons">chrome_reader_mode</i>Blogs</a>
                    <ul>
                    
                            
                            <li class="content" id="blog-home" ><a href="/blogs/blog-home">Blog Home</a></li>
                            
                            <li class="content" id="20210722-nomoreprivatekeys" ><a href="/announcement/2021/07/22/LTI-1.3-tools-must-generate-their-own-keys-and-JWKS-URL">No More Private Keys in Dev Portal</a></li>
                            
                            <li class="content" id="20210511-uefnocookies" ><a href="/blog/2021/05/10/use-one-time-session-tokens-instead-of-cookies-for-UEF-authentication.html">UEF Without Cookies</a></li>
                            
                            <li class="content" id="20210106-howtocreatelimiteduser" ><a href="/announcement/2021/01/06/How-to-Create-a-User-With-Limited-Entitlements-For-REST-API-Calls">Create a User With Limited Entitlements for REST</a></li>
                            
                            <li class="content" id="20201015-cookiesandbrowsers" ><a href="/blog/2020/10/15/Cookies-and-Browsers">Cookies and Browsers</a></li>
                            
                    
                    </ul>
            
        </ul>
    </div>
</div>

<main id="maincontent">
    <div id="body_before_container"> 
            
        <h1 id="use-one-time-session-token-to-authenticate-with-uef">Use One-Time Session Token to Authenticate with UEF</h1>

<p>In testing with the <a href="https://www.google.com/chrome/canary/">Google Canary Chrome Browser</a>, one of our clients discovered an issue that was blocking users from logging in to their Blackboard Learn instance. After much troubleshooting, we discovered a multi-layer issue that brings us to, you guessed it, <a href="https://docs.blackboard.com/blog/2020/10/15/Cookies-and-Browsers">cookies</a>. </p>

<blockquote>
  <p><strong>This affects clients in SaaS with Ultra Base Navigation enabled using Ultra integrations that rely on UEF</strong></p>
</blockquote>

<p>Here is a brief description of the contributing factors:</p>

<p>First, the client had built a custom Ultra login page. The page included code designed to ensure that Learn login pages would never render inside of an iframe within Learn. It looks like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>if ( top != self )
{
    top.location.replace( self.location.href );
}
</code></pre></div></div>

<p>In and of itself there’s nothing wrong with it. We, at Blackboard, have removed it from the default Ultra login page, but many clients use it in Original login pages, and so it’s moved with them into Ultra.</p>

<blockquote>
  <p>If you are unsure whether you have a custom login page, visit <a href="https://help.blackboard.com/Learn/Administrator/SaaS/User_Interface_Options/Ultra_Experience/Institution_Branding/Customize_the_Login_Page">help.blackboard.com</a> for more information.</p>
</blockquote>

<p>Secondly, when a user logged in, Ultra Extensions automatically fired off an LTI launch to UEF-enabled tools. The way UEF works is: after the LTI launch is validated, the tool redirects to the Learn REST endpoint to initiate a UserAuth flow. In our documentation, we call this a Three-Legged OAuth or <a href="https://docs.blackboard.com/learn/rest/getting-started/3lo">3LO</a>. In most cases, it’s a process that relies on a session cookie to hold everything together. This impending release of Chrome (and other browsers) will block this cookie because everything is happening across domains and involves the use of iframes. </p>

<p>So what happens is that, even though the integration is configured in Learn to not force the end-user to authorize the integration, the lack of the session cookie means that Learn has no idea that this user is logged in, so it pops open the login page. </p>

<p>Remember that code snippet above in the custom login page? Well, that takes over the entire browser page with the Learn login. And when the user logs in again, it renders the JavaScript meant for the UEF iframe into the page. In other words, it overtakes your Learn browser session. There is no way to actually get past that screen.</p>

<p>Related, this same issue affects Safari users when <a href="https://support.apple.com/guide/safari/prevent-cross-site-tracking-sfri40732/mac">cross-site tracking is disabled</a>.  </p>

<h2 id="so-what-can-you-do">So what can you do?</h2>

<p>Well, that depends upon who is reading this blog. If you are an administrator trying to get your users back in Learn, the most immediate fix is to remove that snippet from your login page. It won’t fix your broken UEF integration, but it will at least let your users log in and interact with Learn. </p>

<p>If you are a developer that has built a UEF integration, we actually implemented a fix for this in April: a way to bypass the need for a session cookie in this process. In the LTI launch, we now provide what is called a one-time session cookie. This is present in both LTI 1.1 and 1.3 launches. </p>

<p>If you are using LTI 1.3, there’s a small bug in this. I will share a workaround that will both get around this bug, but not fail when the bug is fixed.</p>

<p>This one-time session cookie is added to the claims in the LTI 1.3 JWT and the form POST parameters in LTI 1.1. You can grab that value from the LTI launch, return it as a parameter in your 3LO authorization code request, and your problem will be solved.  </p>

<h3 id="lti13">LTI 1.3</h3>

<p>In LTI 1.3, you will see the value in the <code class="language-plaintext highlighter-rouge">https://blackboard.com/lti/claim/one_time_session_token</code> claim. This token is made up of a specially generated token value. It should also be followed by a comma and the user’s UUID. The bug is that the comma is missing. Luckily, the user’s UUID is the sub token in the same set of LTI claims. We intend to fix this, but to ensure your code works both now and after the fix, you can simply look for the comma. If it’s not there, append it and the sub and you will be off and running. Here’s a Python 3 code snippet to illustrate how this might look. We will be updating our UEF sample code, but at the time of this writing, we have not done so.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    # Get the value of the one time session token from the LTI claim
    one_time_session_token  = message_launch_data['https://blackboard.com/lti/claim/one_time_session_token']

    # If there is no comma in the value, we've hit the bug. Add it and the user's UUID
    if "," not in one_time_session_token:
        one_time_session_token += "," + message_launch_data['sub']

    # Add the one_time_session_cookie to the query parameters to send to the Authorization Code endpoint
    params = {
        'redirect_uri' : Config.config['app_url'] + '/authcode/',
        'response_type' : 'code',
        'client_id' : Config.config['learn_rest_key'],
        'one_time_session_token' : one_time_session_token,
        'scope' : '*',
        'state' : str(uuid.uuid4())
    }

    # Encode the parameters
    encoded_params = urllib.parse.urlencode(params)

    # Redirect the successful LTI validation to the Authorization Code endpoint
    return(redirect(learn_url + '/learn/api/public/v1/oauth2/authorizationCode?' + encoded_params))
</code></pre></div></div>
<p> </p>
<h3 id="lti11">LTI 1.1</h3>

<p>By now, I hope you are using LTI 1.3, but I know many are not. As a result, we also added a one-time session token to LTI 1.1 launches. This will come in the form POST parameter <code class="language-plaintext highlighter-rouge">ext_one_time_session_token</code>. Just like in the 1.3 example, your application should take this value from the LTI launch, append it to the authorization code request endpoint as <code class="language-plaintext highlighter-rouge">one_time_session_cookie=that_token</code> and redirect them to the authorization code endpoint. </p>

<h2 id="summary">Summary</h2>

<p>We have validated this fix with one of the partners that was affected. If you are a developer, please fix the issue immediately! If you are an administrator of a Learn SaaS instance using Ultra, and you have UEF integrations, make sure you do not have that JavaScript snippet on your login page. And if you do, please remove it. Then let your UEF integration partners and developers know that this fix must be made as soon as possible. </p>

<p>Regardless of whether you are an administrator or a developer, please feel free to reach out to us at developers@blackboard.com with any questions.</p>

<p>Happy coding!</p>

    </div>
</main>
<div id="third-column-menu">
    <div class="col hide-on-small-only m3 l2">
        <ul class="section table-of-contents">
            <div id="table-of-contents">
                <div id="table-of-contents">
                    <h4>Categories</h4>


 <span class="site-tag">
    <a href="/category/announcement"
        style="font-size: 112%">
            announcement (8)
    </a><br />
</span>

 <span class="site-tag">
    <a href="/category/blog"
        style="font-size: 92%">
            blog (3)
    </a><br />
</span>

 <span class="site-tag">
    <a href="/category/devcon"
        style="font-size: 88%">
            devcon (2)
    </a><br />
</span>

<br />
                    <hr />
                    <h4>Tag Cloud</h2>


 <span class="site-tag">
    <a href="/tag/ally"
        style="font-size: 84%">
            ally (1)
    </a><br />
</span>

 <span class="site-tag">
    <a href="/tag/api"
        style="font-size: 92%">
            api (3)
    </a><br />
</span>

 <span class="site-tag">
    <a href="/tag/building-blocks"
        style="font-size: 84%">
            building blocks (1)
    </a><br />
</span>

 <span class="site-tag">
    <a href="/tag/caliper"
        style="font-size: 84%">
            caliper (1)
    </a><br />
</span>

 <span class="site-tag">
    <a href="/tag/community"
        style="font-size: 88%">
            community (2)
    </a><br />
</span>

 <span class="site-tag">
    <a href="/tag/devcon"
        style="font-size: 88%">
            devcon (2)
    </a><br />
</span>

 <span class="site-tag">
    <a href="/tag/developers"
        style="font-size: 84%">
            developers (1)
    </a><br />
</span>

 <span class="site-tag">
    <a href="/tag/eol"
        style="font-size: 84%">
            eol (1)
    </a><br />
</span>

 <span class="site-tag">
    <a href="/tag/keys"
        style="font-size: 84%">
            keys (1)
    </a><br />
</span>

 <span class="site-tag">
    <a href="/tag/learn"
        style="font-size: 104%">
            learn (6)
    </a><br />
</span>

 <span class="site-tag">
    <a href="/tag/lti"
        style="font-size: 96%">
            lti (4)
    </a><br />
</span>

 <span class="site-tag">
    <a href="/tag/recap"
        style="font-size: 88%">
            recap (2)
    </a><br />
</span>

 <span class="site-tag">
    <a href="/tag/rest"
        style="font-size: 96%">
            rest (4)
    </a><br />
</span>

 <span class="site-tag">
    <a href="/tag/soap"
        style="font-size: 84%">
            soap (1)
    </a><br />
</span>

 <span class="site-tag">
    <a href="/tag/standards"
        style="font-size: 88%">
            standards (2)
    </a><br />
</span>

 <span class="site-tag">
    <a href="/tag/template-variables"
        style="font-size: 84%">
            template variables (1)
    </a><br />
</span>

 <span class="site-tag">
    <a href="/tag/tutorials"
        style="font-size: 84%">
            tutorials (1)
    </a><br />
</span>

 <span class="site-tag">
    <a href="/tag/uef"
        style="font-size: 92%">
            uef (3)
    </a><br />
</span>

 <span class="site-tag">
    <a href="/tag/ultra"
        style="font-size: 88%">
            ultra (2)
    </a><br />
</span>

 <span class="site-tag">
    <a href="/tag/update"
        style="font-size: 88%">
            update (2)
    </a><br />
</span>

                  </div>
              </div>
        </ul>
      </div>
</div>
<div class="clearfix"></div>
<footer class="page-footer">
    <div class="container">
      <div class="row">
        <div class="col l6 s12">
          <h5 class="white-text">Contact us</h5>
          <p class="grey-text text-lighten-4">Reach us out at <a href="mailto:developers@blackboard.com?subject=Support from docs">developers@blackboard.com</a> if you have any questions.</p>
        </div>
        <div class="col l4 offset-l2 s12">
          <h5 class="white-text">Terms and Conditions</h5>
          <ul>
            <li><a class="grey-text text-lighten-3" target="_self" href="/legal/deprecation-policy">Deprecation Policy</a></li>
            <li><a class="grey-text text-lighten-3" target="_self" href="/legal/terms-and-conditions">Terms and Conditions</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="footer-copyright">
      <div class="container">
      <a class="grey-text text-lighten-4 left" target="_blank" href="https://www.blackboard.com">© Blackboard, Inc</a>
      </div>
    </div>
  </footer>
</body>
<script>

        // This modifies dynamically the menu height based on the content height
        let menu = document.getElementsByClassName('menu');
        const getElementHeight = function(elementName){
            let element = document.getElementsByTagName(elementName);
            return element[0].offsetHeight;
        }  


        const updateMenuHeight = function(){
            let finalSize = getElementHeight('main')
            finalSize = (finalSize + 200 )+ 'px';
            return menu[0].style.minHeight = finalSize
        }
        
        window.addEventListener("resize", updateMenuHeight );
        window.addEventListener("load", updateMenuHeight );

        // Need to resize the whole content when no toc
        let pageToc = "true";
        pageToc = pageToc.toLowerCase();
        const bodyMainContent = document.getElementById('maincontent');
        const toc = document.getElementById('third-column-menu');


        if(bodyMainContent != null){
        window.addEventListener("resize", function(){
            if(pageToc == 'false'){
              if ( toc ){
                toc.style.display = 'none';
              }
                if (window.innerWidth >= 1499 ) {
                    bodyMainContent.style.width = '76%';
                    console.log('1499');
                } else if (window.innerWidth <= 1498 && window.innerWidth >= 985){
                    bodyMainContent.style.width = '70%';
                    console.log('1250');
                } else if (window.innerWidth <= 985 && window.innerWidth >= 800){
                  bodyMainContent.style.width = '63%';
                } else if (window.innerWidth <= 800 ){
                  bodyMainContent.style.width = '95%';
                }
            }
        });
      }
</script>

</html>