I"·4<h1 id="first-project-gradle-git-and-b2-starter-template">First Project: Gradle, Git, and b2-starter-template</h1>
<p><em>Author: Scott Hurrey</em><br />
<em>Categories: [â€˜Building Blocksâ€™, â€˜Getting Startedâ€™, â€˜Tutorialsâ€™]</em><br />
<em>Tags: [â€˜building blocksâ€™, â€˜gitâ€™, â€˜gradleâ€™, â€˜getting startedâ€™, â€˜blackboard learnâ€™, â€˜technologiesâ€™, â€˜b2-starter-templateâ€™, â€˜developerâ€™]</em></p>
<hr />

<p>After setting up the development workstation as described in the Development
Workstation topic you may now build your first project based on the Blackboard
basic-b2-template and gradle build environment.</p>

<h2 id="start-a-gradle-based-project">Start a Gradle Based Project</h2>

<p>In this step you will download the Blackboard provided project template, copy
it to a new project directory named after your project, configure the template
to reflect your project requirements by editing the build and bb-manifest.xml
files.</p>

<h3 id="git-the-basic-b2-template">â€˜GITâ€™ the basic-b2-template</h3>

<p>Blackboard provides a gradle-based template for Building Block development
which is accessible from the Blackboard GitHub project repository:</p>

<p><a href="https://github.com/blackboard/basic-b2-template">https://github.com/blackboard/basic-b2-template</a></p>

<p>There are several ways which you may access the basic-b2-template. Notably:</p>

<ul>
  <li>Download a zip file â€“ this works fine if you do not have GIT installed and is available via a link on the project page.</li>
  <li>Clone the project to your desktop via the GitHub website via a link on the project page.</li>
  <li>Use the GIT command-line tools to clone and rename the project.</li>
  <li>In the case of the first two you have to manually copy/rename the directory to reflect your project name. The third approach, the GIT command-line is what is used in this tutorial - note this requires that you have installed GIT on your development workstation.</li>
</ul>

<h4 id="using-git-command-line-tools">Using GIT command-line tools</h4>

<p>The command for cloning a remote GIT repository is</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git cloneÂ  -oÂ  
</code></pre></div></div>

<p>So using â€˜my-gradleB2â€™ as an example the template would be cloned byclone the
template thus:</p>

<p>Using a terminal change to your GIT managed project directory and</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git clone https://github.com/blackboard/basic-b2-template.git -o my-gradleB2 my-gradleB2
</code></pre></div></div>

<p>(re)Initialize your local repository</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git init
</code></pre></div></div>

<p>Add the cloned files to your local git repo</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git add -A
</code></pre></div></div>

<h4 id="an-important-note-about-git">An important note about GIT</h4>

<p>It is all local until it is pushed to the remote repository â€“ add, commit,
remove, branch etc all happen on your local repository.</p>

<p>Only if and only when you push your local repository to the remote do you
impact the remote repository.</p>

<h3 id="import-the-project-into-your-ide">Import the Project Into Your IDE</h3>

<p>You have cloned the remote repository and set up a local â€˜working directoryâ€™
now you need to import the project into your IDE so that you can begin coding.
The basic-b2-template is a gradle project thus so is the clone.</p>

<h4 id="netbeans">NetBeans</h4>

<p>NetBeans recognizes and imports gradle projects such as the cloned
basic-b2-template:</p>

<ol>
  <li>Open NetBeans</li>
  <li>Select File: Open Project</li>
  <li>Navigate to your GIT dev directory and select the project.</li>
</ol>

<p>NetBeans recognizes and Imports the project with all itâ€™s â€˜gradleness intact.â€™</p>

<h4 id="eclipse">Eclipse</h4>

<p>Eclipse with the Gradle plugin (or STS) supports importing Gradle projects via
Import&gt;Gradle&gt;Gradle Project menu.</p>

<p>An Eclipse w/o the Gradle plugin requires the creation of the supporting
Eclipse project files to import the project. This is done by running the
Gradle Eclipse plugin:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ gradle eclipse  
Â Â  :eclipseClasspath  
Â Â  :eclipseJdt  
Â Â  :eclipseProject  
Â Â  :eclipse  
Â Â  BUILD SUCCESSFUL
</code></pre></div></div>

<p>When the Eclipse plugin successfully completes, import the project as you
would normally using Import&gt;General&gt;Existing Projects into Workspace.</p>

<p>The schema folder in both NetBeans and Eclipse is generated outside the Web
Pages folder â€“ this is a manifestation of the template clone not an Eclipse or
NetBeans issue â€“ just drag it into the Web Pages folder.</p>

<h3 id="edit-the-buildgradle-and-bb-manifestxml-files">Edit the build.gradle and bb-manifest.xml files</h3>

<h4 id="buildgradle">build.gradle</h4>

<p>The build.gradle file provides the necessary libraries for the build,
dependency management for the project classpath and war file, and the target
settings for maven and deployment of the Building Block. These must be edited
to reflect your project requirements.</p>

<p>You will make edits to three areas of the file:</p>

<table>
  <thead>
    <tr>
      <th>Term</th>
      <th>Definition</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ext or project.ext</td>
      <td>this specifies replacement variables for the build</td>
    </tr>
    <tr>
      <td>repository</td>
      <td>this specifies the location of the maven repository</td>
    </tr>
    <tr>
      <td>dependencies</td>
      <td>management of project dependencies</td>
    </tr>
  </tbody>
</table>

<h4 id="ext-or-projectext">ext (or project.ext)</h4>

<p>Set this section to reflect your remote development settings:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Â  project.ext {  
Â Â Â Â  learnVersion = "9.1.110082.0"  
Â Â Â Â  deployServer = "10.0.1.150"  
Â Â Â Â  deployInstance = "BBLEARN"  
Â Â  }  
</code></pre></div></div>

<table>
  <thead>
    <tr>
      <th>Term</th>
      <th>Definition</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>learnVersion</td>
      <td>used in pulling the appropriate library jars for target version</td>
    </tr>
    <tr>
      <td>deployServer</td>
      <td>the IP or server name for the target development server (add â€œ:&lt;port&amp;rt;â€ if not served from port 80)</td>
    </tr>
    <tr>
      <td>deployInstance</td>
      <td>the DB instance for the target development server</td>
    </tr>
  </tbody>
</table>

<h4 id="repository">repository</h4>

<p>Set this section to reflect the Learn maven repository:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>repositories {  
Â Â  mavenCentral()  
Â Â  maven {  
Â Â Â  url "https://maven.blackboard.com/content...ries/releases/"  
Â Â  }  
 }  
</code></pre></div></div>

<p>You may add additional maven repositories:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>maven {...}  
maven { url https://repo.myinst.edu/mavenrepo }  
</code></pre></div></div>

<h4 id="dependencies">dependencies</h4>

<p>Set this section to reflect project dependencies:</p>

<table>
  <thead>
    <tr>
      <th>Term</th>
      <th>Definition</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>providedCompile</td>
      <td>required but NOT built into WAR</td>
    </tr>
    <tr>
      <td>compile</td>
      <td>required AND built into WAR</td>
    </tr>
  </tbody>
</table>

<p><a href="https://www.gradle.org/docs/current/userguide/dependency_management.html">Gradle Dependency Management Documentation</a></p>

<p>Blackboard jars should always be providedCompile to exclude them from the war
file:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    providedCompile( "blackboard.platform:bb-platform:$ext.learnVersionâ€)Â  { transitive = false }  
    providedCompile( "blackboard.platform:bb-cms-admin:$ext.learnVersion" ) { transitive = false }   
    providedCompile( "blackboard.platform:bb-taglibs:$ext.learnVersion" ) { transitive = false }  
</code></pre></div></div>

<p><strong>NOTE: <em>â€˜transitiveâ€™ determines whether to pull all related library dependencies onto the build path.</em></strong></p>

<p>Supporting Libraries which need to be built into the war are added as</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>â€˜compileâ€™:

    compile "org.springframework:spring-aop:$ext.springVersion",   
    Â Â Â Â Â Â Â  "com.googlecode.json-simple:json-simple:1.1",   
    Â Â Â Â Â Â Â  "org.codehaus.jackson:jackson-mapper-asl:1.8.5",   
    Â Â Â Â Â Â Â  "commons-logging:commons-logging:1.1.1",   
    Â Â Â Â Â Â Â  "junit:junit:4.5",   
    Â Â Â Â Â Â Â  "org.json:json:20090211"Â Â Â    
```    Â    

Setting transitive to 'true' specifies a dependency that is reconciled by
Gradle and places all libraries required to satisfy the dependencies on the
build path.
</code></pre></div></div>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>compile( "org.hibernate:hibernate-core:$ext.hibernateVersion" ) { transitive = true } ```
</code></pre></div></div>

<h3 id="bb-manifestxml-and-bb-manifest-en_usproperties">bb-manifest.xml and bb-manifest-en_US.properties</h3>

<p>Set up the bb-manifest to meet the requirements for your project.</p>

<p>The basic-b2-template provides the framework of a bb-manifest.xml file which
uses internationalization bundles. There are two files that require editing:</p>

<ul>
  <li>bb-manifest.xml</li>
  <li>bundles/bb-manifest-en_US.properties</li>
</ul>

<p>Both these files are located in the project WEB-INF directory.</p>

<h4 id="bb-manifestxml">bb-manifest.xml</h4>

<p>The basic-b2-template bb-manifest minimally requires edits to the following
noted areas for use in your cloned project.</p>
<pre><code class="language-Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ">    Â Â Â  &lt;name value="b2.name" /&gt; &lt;--- this is changed in bb-manifest-en_US.propertiesÂ Â Â Â    
    Â Â Â  &lt;handle value="template" /&gt; &lt;--- this should be changed to reflect the project name - such as my-gradleB2Â Â Â Â    
    Â Â Â  &lt;description value="b2.description" /&gt; &lt;--- this is changed in bb-manifest-en_US.propertiesÂ Â Â Â    
    Â Â Â  &lt;default-locale value="en_US" /&gt; &lt;--- this may be left unchangedÂ Â Â Â    
    Â Â Â  &lt;version value="1.0" /&gt; &lt;--- this may be changed to reflect the extension versionÂ Â Â Â    
    Â Â Â  &lt;requires&gt;  
    Â Â Â Â Â Â Â  &lt;bbversion value="9.1.110082.0" /&gt; &lt;--- this should be changed to reflect the minimal target Learn version&lt;/requires&gt;Â Â Â Â Â    
    Â Â Â  &lt;vendor&gt;  
    Â Â Â Â Â Â Â  &lt;id value="mnmt" /&gt; &lt;--- this should be changed to a four character id that reflects the extension originÂ 
            &lt;name value="Monument University" /&gt; &lt;--- this should be changed to the vendor nameÂ Â Â Â Â Â Â    
    Â Â Â Â Â Â Â  &lt;url value="http://www.monument.edu/" /&gt; &lt;--- this should be changed to vendor URLÂ Â Â Â Â Â    
    Â Â Â Â Â Â Â  &lt;description value="Monument University" /&gt; &lt;--- this should be a brief description of the vendorÂ Â Â Â    
    Â Â Â  &lt;/vendor&gt;  
</code></pre>

<h4 id="bb-manifest-en_usproperties">bb-manifest-en_US.properties</h4>

<p>Bundle *.properties files provide the means to internationalize the bb-
manifest sections that are visible in the UI and any text that is displayed as
part of the extensionâ€™s user interface.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    b2.name=B2 TemplateÂ  &lt;--- this should be changed to reflect the name of your extension, such as my-gradleB2   
    b2.description=Simple B2 template for starting new B2 projects.Â  &lt;--- this should contain a brief description of the extension's function.  
</code></pre></div></div>

<h3 id="build-and-deploy">Build and Deploy</h3>

<p>Building and deploying is conveniently done via a terminal by running the
gradle deployB2 task from within the top level directory of your project.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    $ gradle deployB2  
     :compileJava UP-TO-DATE   
     :processResources UP-TO-DATE  
     :classes UP-TO-DATE  
     :war UP-TO-DATE  
     :deployB2  
     BUILD SUCCESSFUL  
     Total time: 12.423 secs  
</code></pre></div></div>

<p>Note that launching custom tasks may be configurable within your IDE. Adding a
custom task enables a build and deploy cycle to be run entirely from within
the IDE.</p>

<h2 id="benefits">Benefits</h2>

<h3 id="consistency-and-control">Consistency and Control</h3>

<p>Use of Gradle, a VM, and a SCM such as GIT provide a consistent environment
for development â€“ across all projects, while providing a means of managing
your code-base.</p>

<h3 id="speed">Speed</h3>

<p>While average build-times may not significantly decrease, the significant time
savings resulting from improved general project management and from the
deployment feature of the Learn/Gradle dev environment adds up quickly when
compared to a manual deploy cycle.</p>

:ET